<!--
    SETTINGS:
    - Show mov type icon
    - Show weapon type icon
    - Show weapon builds (to the side)
    - Show season
    - Show lift loss
    - Show grid (?)
    - Show threat range (eventually)
    - show sharable link?
-->
<span id="dialog_close" (click)="this.close()" class="material-icons">close</span>
<div class="settings_container">
    <h2>Save Image</h2>
    <hr />
    <div class="options_container_container">
        <div class="options_container">
            <form [formGroup]="options">
                <mat-checkbox color="primary" formControlName="movement" matTooltip="Shows movement type of hero on their icon">Movement Icon</mat-checkbox>
                <mat-checkbox color="primary" formControlName="weapons" matTooltip="Shows weapon type of hero on their icon">Weapon Icon</mat-checkbox>
                <mat-checkbox color="primary" formControlName="builds" matTooltip="Shows hero's builds">Hero Builds</mat-checkbox>
                <!-- <mat-checkbox formControlName="season">Season</mat-checkbox>
                <mat-checkbox formControlName="lift">Lift Loss</mat-checkbox> -->
                <mat-checkbox color="primary" formControlName="mythics" matTooltip="Adds on-season mythic bonus stats to heroes">+Mythic Stats</mat-checkbox>
                <mat-checkbox color="primary" formControlName="season_lift_loss" matTooltip="Shows the season and the max lift loss of the defense">Season/Max Loss</mat-checkbox>
                <mat-checkbox color="primary" formControlName="watermark" matTooltip="Shows watermark in bottom left (optional)">Watermark</mat-checkbox>
            </form>
            <a mat-raised-button style="margin-top: 5px;" color="primary" download="ar-d.png" [disabled]="!this.imageData" [href]='this.imageData'>Save</a>    
        </div>
    </div>
    <!-- <p *ngIf="fontFix" style="font-family: Fire_Emblem_Heroes_Font; font-size: 1px;">.</p> -->
    <h3 style="margin-top: 10px;">Preview (desktop only)</h3>
    <hr />
</div>
<div [style.display]="getWidth() >= 810 && loading ? 'flex' : 'none'" class="loading_modal" [ngStyle]="{'height': totalHeight + 'px', 'width': totalWidth + 'px'}">
    <mat-spinner diameter="60" color="accent"></mat-spinner>
    <p>{{loadingMessage}}</p>
</div>
<canvas [style.display]="getWidth() >= 810 ? 'initial' : 'none'" #previewCanvas [width]="totalWidth" [height]="totalHeight" [ngStyle]="{'height': totalHeight + 'px', 'width': totalWidth + 'px'}"></canvas>